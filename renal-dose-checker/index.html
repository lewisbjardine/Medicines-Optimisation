<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Renal Dose Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- MUST LOAD SHARED NHS STYLING FIRST -->
  <link rel="stylesheet" href="../shared/styles.css" />

  <!-- Local tweaks only -->
  <style>
    .search-suggestions {
      border: 1px solid #d0d7de;
      background: #ffffff;
      border-radius: 6px;
      margin-top: 2px;
      position: absolute;
      width: 100%;
      z-index: 50;
      display: none;
    }
    .search-suggestions button {
      width: 100%;
      text-align: left;
      background: white;
      color: #111 !important;
      padding: 0.5rem 0.7rem;
      border: none;
      font-size: 0.95rem;
      cursor: pointer;
    }
    .search-suggestions button:hover {
      background: #e8f1fb;
    }

    /* green highlight for recommended band */
    .renal-band.highlight {
      border-color: #0f766e;
      background: #ecfdf5;
      box-shadow: 0 0 0 1px rgba(15,118,110,0.3);
    }
  </style>

  <!-- Load database then app logic -->
  <script type="module" src="drugs.js"></script>
  <script type="module" src="app.js"></script>
</head>

<body>

  <!-- MATCHED TO OPIOID MODULE HEADER -->
  <header>
    <h1>Renal Dose Calculator</h1>
    <p class="subtitle">
      Prototype tool – renal dose adjustments using eGFR/CrCl.  
      Always verify with BNF, SPS, Renal Drug Handbook & local guidelines.
    </p>
    <a href="../index.html" class="return-home">Back to Medicines Optimisation home</a>
  </header>

  <!-- SEARCH VIEW -->
  <main class="card" id="search-view" style="max-width:960px;margin:1.5rem auto;padding:1.5rem;">
    <h2>Search for a medicine</h2>

    <label class="field">
      <span>eGFR (mL/min/1.73m²)</span>
      <input type="number" id="egfr-input" placeholder="Optional (e.g. 32)" />
    </label>

    <label class="field" style="position:relative;">
      <span>Medicine name</span>
      <input id="drug-search" type="text" autocomplete="off"
             placeholder="Start typing (e.g. ‘metf’, ‘gaba’, ‘apix’)" />
      <div id="search-suggestions" class="search-suggestions"></div>
    </label>

    <p style="font-size:0.85rem;opacity:0.8;margin-top:4px;">
      Type at least 2 letters to see matching medicines.
    </p>
  </main>

  <!-- DRUG DETAIL VIEW -->
  <section id="drug-view" class="card hidden"
           style="max-width:960px;margin:1.5rem auto;padding:1.5rem;">

    <button id="back-button" class="secondary">← Back to search</button>

    <h2 id="drug-name" style="margin-top:1rem;"></h2>
    <p id="drug-class" class="subtitle"></p>
    <div id="drug-tags" class="chips-row"></div>

    <h3>Usual dosing</h3>
    <p id="drug-usual-dose"></p>

    <h3>Renal dosing bands</h3>
    <p id="egfr-summary" style="opacity:0.8;"></p>
    <ul id="renal-bands"></ul>

    <h3>Notes & cautions</h3>
    <ul id="drug-notes"></ul>

    <p style="font-size:0.8rem;opacity:0.7;margin-top:1rem;">
      Always confirm with BNF 'Prescribing in Renal Impairment', SPC, SPS DOAC guidance  
      and your local renal / formulary guidance.
    </p>
  </section>

</body>
</html>
