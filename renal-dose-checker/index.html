<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Renal Dose Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Shared NHS styling -->
  <link rel="stylesheet" href="../shared/styles.css" />

  <!-- Local styles for search dropdown clarity -->
  <style>
    /* Ensure suggestions text visible against NHS theme */
    .search-suggestions button {
      color: #1a1a1a !important;
      background: #ffffff;
      padding: 0.5rem 0.7rem;
      font-size: 0.95rem;
      text-align: left;
    }
    .search-suggestions button:hover {
      background: #f0f6fd !important;
      color: #000 !important;
    }
    .search-suggestions {
      z-index: 40 !important;
      border: 1px solid #d0d7de;
      border-radius: 0.5rem;
      background: #ffffff;
    }
  </style>

  <!-- Load database FIRST -->
  <script src="drugs.js" type="module"></script>
  <!-- Load app logic AFTER -->
  <script src="app.js" type="module"></script>
</head>

<body>
  <header>
    <h1>Renal Dose Calculator</h1>
    <p class="subtitle">
      Highlights dose adjustments by eGFR.  
      Always verify with BNF, SPS, Renal Drug Handbook & local guidance.
    </p>
    <a href="../index.html" class="return-home">Back to Medicines Optimisation home</a>
  </header>

  <main class="card" style="max-width:960px;margin:1.5rem auto;padding:1.5rem;">
    <h2>Search for a medicine</h2>

    <!-- eGFR -->
    <div class="field">
      <label for="egfr-input">eGFR (mL/min/1.73m²)</label>
      <input type="number" id="egfr-input" placeholder="Enter current eGFR (optional)" />
    </div>

    <!-- Search box -->
    <div class="field" style="position:relative;">
      <label for="drug-search">Medicine name</label>
      <input type="text" id="drug-search" placeholder="Start typing e.g. ‘gaba’, ‘metf’, ‘api’" autocomplete="off" />
      <div id="search-suggestions" class="search-suggestions hidden"></div>
    </div>

    <p style="font-size:0.85rem;color:#555;">Type at least 2 letters to see results. Click a drug to open its renal dosing information.</p>
  </main>

  <!-- DRUG DETAIL VIEW -->
  <section id="drug-view" class="card hidden" style="max-width:960px;margin:1.5rem auto;padding:1.5rem;">
    <button id="back-button" class="secondary" style="margin-bottom:1rem;">← Back to search</button>

    <h2 id="drug-name"></h2>
    <p id="drug-class" style="opacity:0.8;"></p>
    <div id="drug-tags" class="chips-row"></div>

    <h3>Usual dosing</h3>
    <p id="drug-usual-dose"></p>

    <h3>Renal dosing bands</h3>
    <p id="egfr-summary"></p>
    <ul id="renal-bands"></ul>

    <h3>Notes & cautions</h3>
    <ul id="drug-notes"></ul>

    <p style="font-size:0.8rem;opacity:0.7;margin-top:1rem;">
      Always cross-check with BNF ‘Prescribing in Renal Impairment’, drug monographs,
      SPS DOAC guidance, local renal guidelines & the Renal Drug Handbook.
    </p>
  </section>

</body>
</html>
